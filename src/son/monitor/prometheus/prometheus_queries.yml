---

flowquery:
  - metric_name: 'tx_packet_rate'
    query_template: 'rate(sonemu_tx_count_packets{{flow_id="{0}",vnf_name="{1}",vnf_interface="{2}"}}[3s])'
    unit: 'packets/sec'
  - metric_name: 'rx_packet_rate'
    query_template: 'rate(sonemu_rx_count_packets{{flow_id="{0}",vnf_name="{1}",vnf_interface="{2}"}}[3s])'
    unit: 'packets/sec'
  - metric_name: 'tx_byte_rate'
    query_template: 'rate(sonemu_tx_count_bytes{{flow_id="{0}",vnf_name="{1}",vnf_interface="{2}"}}[3s])'
    unit: 'bytes/sec'
  - metric_name: 'rx_byte_rate'
    query_template: 'rate(sonemu_rx_count_bytes{{flow_id="{0}",vnf_name="{1}",vnf_interface="{2}"}}[3s])'
    unit: 'bytes/sec'
  - metric_name: 'tx_packet_count'
    query_template: 'sonemu_tx_count_packets{{flow_id="{0}",vnf_name="{1}",vnf_interface="{2}"}}'
    unit: 'packets'
  - metric_name: 'rx_packet_count'
    query_template: 'sonemu_rx_count_packets{{flow_id="{0}",vnf_name="{1}",vnf_interface="{2}"}}'
    unit: 'packets'
  - metric_name: 'tx_byte_count'
    query_template: 'sonemu_tx_count_bytes{{flow_id="{0}",vnf_name="{1}",vnf_interface="{2}"}}'
    unit: 'bytes'
  - metric_name: 'rx_byte_count'
    query_template: 'sonemu_rx_count_bytes{{flow_id="{0}",vnf_name="{1}",vnf_interface="{2}"}}'
    unit: 'bytes'

computequery:
  - metric_name: 'cpu'
    query_template: 'sum(rate(container_cpu_usage_seconds_total{{name="mn.{0}"}}[5s]))*100'
    unit: '%'
  - metric_name: 'mem'
    query_template: 'sum(container_memory_usage_bytes{{name="mn.{0}"}}/1000000)'
    unit: 'MB'
  - metric_name: 'host_cpu'
    query_template: 'sum(rate(container_cpu_usage_seconds_total{{id="/"}}[5s]))*100'
    unit: '%'
  - metric_name: 'skew_cpu'
    query_template: 'skewness{{vnf_name="{0}",vnf_metric="cpu"}}'
    unit: ''
  - metric_name: 'num_cores'
    query_template: 'machine_cpu_cores'
    unit: 'core(s)'

networkquery:
  - metric_name: 'tx_packet_rate'
    query_template: 'rate(sonemu_tx_count_packets{{flow_id="None",vnf_name="{0}",vnf_interface="{1}"}}[3s])'
    unit: 'packets/sec'
  - metric_name: 'rx_packet_rate'
    query_template: 'rate(sonemu_rx_count_packets{{flow_id="None",vnf_name="{0}",vnf_interface="{1}"}}[3s])'
    unit: 'packets/sec'
  - metric_name: 'tx_byte_rate'
    query_template: 'rate(sonemu_tx_count_bytes{{flow_id="None",vnf_name="{0}",vnf_interface="{1}"}}[3s])'
    unit: 'bytes/sec'
  - metric_name: 'rx_byte_rate'
    query_template: 'rate(sonemu_rx_count_bytes{{flow_id="None",vnf_name="{0}",vnf_interface="{1}"}}[3s])'
    unit: 'bytes/sec'
  - metric_name: 'tx_packet_count'
    query_template: 'sonemu_tx_count_packets{{flow_id="None",vnf_name="{0}",vnf_interface="{1}"}}'
    unit: 'packets'
  - metric_name: 'rx_packet_count'
    query_template: 'sonemu_rx_count_packets{{flow_id="None",vnf_name="{0}",vnf_interface="{1}"}}'
    unit: 'packets'
  - metric_name: 'tx_byte_count'
    query_template: 'sonemu_tx_count_bytes{{flow_id="None",vnf_name="{0}",vnf_interface="{1}"}}'
    unit: 'bytes'
  - metric_name: 'rx_byte_count'
    query_template: 'sonemu_rx_count_bytes{{flow_id="None",vnf_name="{0}",vnf_interface="{1}"}}'
    unit: 'bytes'
  - metric_name: 'tx_packet_rate_cadv'
    query_template: 'rate(container_network_transmit_packets_total{{id=~"/docker.*",name="mn.{0}",interface="{1}"}}[3s])'
    unit: 'packets'
  - metric_name: 'rx_packet_rate_cadv'
    query_template: 'rate(container_network_receive_packets_total{{id=~"/docker.*",name="mn.{0}",interface="{1}"}}[3s])'
    unit: 'packets'
  - metric_name: 'tx_byte_rate_cadv'
    query_template: 'rate(container_network_transmit_bytes_total{{id=~"/docker.*",name="mn.{0}",interface="{1}"}}[3s])'
    unit: 'bytes'
  - metric_name: 'rx_byte_rate_cadv'
    query_template: 'rate(container_network_receive_bytes_total{{id=~"/docker.*",name="mn.{0}",interface="{1}"}}[3s])'
    unit: 'bytes'


testvnfquery:
  - metric_name: 'jitter'
    query_template: 'sonemu_jitter_ms{{vnf_name="{0}"}}'
    unit: 'ms'
  - metric_name: 'packet_loss'
    query_template: 'sonemu_packet_loss_percent{{vnf_name="{0}"}}'
    unit: '%'
  - metric_name: 'throughput'
    query_template: 'sonemu_bandwith_Mbitspersec{{vnf_name="{0}"}}'
    unit: 'Mbits/sec'

